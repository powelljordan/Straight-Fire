<!DOCTYPE html>
<html>
	<head>
		<title>Profile</title>
		<link rel="stylesheet" href="../bootstrap-3.3.6-dist/css/bootstrap.min.css"/>
		<script src="../jquery/js/jquery-1.12.3.min.js"></script>
		<script src="../bootstrap-3.3.6-dist/js/bootstrap.min.js"></script>
	</head>
	<body>
		<nav class="navbar navbar-default">
		  <div class="container-fluid">
		    <!-- Brand and toggle get grouped for better mobile display -->
		    <div class="navbar-header">
		      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
		        <span class="sr-only">Toggle navigation</span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		      </button>
		      <a class="navbar-brand" href="index.html">Home</a>
		    </div>

		    <!-- Collect the nav links, forms, and other content for toggling -->
		    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
		      <ul class="nav navbar-nav">
		        <li  class="active"><a href="profile.html">Profile <span class="sr-only">(current)</span></a></li>
		        <li><a href="donations.html">Donations</a></li>
		        <li><a href="shopping.html">Shopping</a></li>
		      </ul>
		      <ul class="nav navbar-nav navbar-right">
		        <li class="dropdown">
		          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Inventories<span class="caret"></span></a>
		          <ul class="dropdown-menu">
		            <li><a href="#">Wishlist</a></li>
		            <li><a href="#">ToyChest</a></li>
		            <li role="separator" class="divider"></li>
		            <li><a href="#">Change child</a></li>
		          </ul>
		        </li>
		      </ul>
		    </div><!-- /.navbar-collapse -->
		  </div><!-- /.container-fluid -->
		</nav>

		<!-- end of nav bar and start of actual code -->
		
		<!-- CSS STYLING -->
		<style type ="text/css">

			.ad-left {
			  float: left;
			}
			 
			.ad-right {
			  float: right;
			  margin-left: 10px;
			}


			/* Bootstrap icon colors */
			.blue {
				color: blue;
			}

			.green {
				color: green;
			}

			.red {
				color: red;
			}

		</style>

		<div class="col-sm-6">
			<table>
				<tr align="center"><td><div>
					<h1> David </h1>
					<img id="avatarImage" src="../images/boyAvatar.jpg"><br><br>
				</div></td></tr>
				<tr align="center"><td>
					<input type="image" src="../images/toyChest.jpg" onClick="viewToyChest()">
				</td></tr>
			</table> <!-- end of first half of page -->
		</div>


		<div class="col-sm-6">
			<div>
				<input type="image" src="../images/startShopping.png" height="50" onClick="startShopping()" align="right">
			<div>
			<div>
				Name:
				<span id="nameField-span">David</span>
				<input type='text' id='nameField-input' onClick='this.select()' placeholder='First and last name'>
				<span class="glyphicon glyphicon-pencil blue" height="50" onClick="editName()"></span>
			</div>
			<br><br>
			<div>
				Age:
				<span id="ageField-span">8</span>
				<input type='text' id='ageField-input' onclick='this.select()' placeholder='Numerical value'>
				<span class="glyphicon glyphicon-pencil blue" height="50" onClick="editAge()"></span>
			</div>
			<br><br>
			<div>
				Interests:
				<span id="interestsField-span">Star Wars</span>
				<input type='text' id='interestsField-input' onclick='this.select()' placeholder='Add one interest at a time'>
				<span id="interestsPencil" class="glyphicon glyphicon-pencil blue" height="50" onClick="editInterest()"></span>
				<span class="glyphicon glyphicon-plus green" height="50" onClick="addInterest()"></span>
				<br>
					<!-- list of interests -->
					<table id="interestsTable" class='alnright' border="0">
					</table>
			</div>
			<br>
			<input type="button" onClick="save();" value="Save">
		</div> <!-- end of second half of page -->


		<!-- JavaScript -->
		<script language="javascript" type="text/javascript">

			$("#nameField-input").css({display:"None"});
			$("#ageField-input").css({display:"None"});
			$("#interestsField-input").css({display:"None"});

			// save button
			function save() {
				// make input text into solid text
				if (document.getElementById('nameField-input').tagName == 'INPUT') {
					var newName = String(document.getElementById('nameField-span').value);
					$( "#nameField-input" ).replaceWith("<span id='nameField-span'>" + newName + "</span>");
				} 
				if (document.getElementById('ageField-input').tagName == 'INPUT'){
					var newAge = String(document.getElementById('ageField-span').value);
					$( "#ageField-input" ).replaceWith("<span id='ageField-span'>" + newAge + "</span>");
				} 
				if(document.getElementById('interestsField-input').tagName == 'INPUT') {
					var newInterest = String(document.getElementById('interestsField-span').value);
					$( "#interestsField-input" ).replaceWith("<span id='interestsField-span'>" + newInterest + "</span>");
					// remove delete icons
					var deleteIcons = document.getElementsByClassName('glyphicon glyphicon-remove red');
					while(deleteIcons[0]) {
						deleteIcons[0].parentNode.removeChild(deleteIcons[0]);
					}
				}
			} 


			// editing form fields
			function editName() {
				var newName = $("#nameField-span").text();		
				// make solid text into input text
				$("#nameField-span").css({display:"none"});
				$("#nameField-input").css({display:"inline-block"});
				$("#nameField-input").val(newName);
				$("#nameField-input").select();
			} 

			function editAge() {
				var newAge = $("#ageField-span").text();
				// make solid text into input text
				$("#ageField-span").css({display:"none"});
				$("#ageField-input").css({display:"inline-block"});
				$("#ageField-input").val(newAge);
				$("#ageField").select();
			}

			function editInterest() {
				var newInterest = $("#interestsField-span").text();
				// make solid text into input text
				$("#interestsField-span").css({display:"none"});
				$("#interestsField-input").css({display:"inline-block"});
				$("#interestsField-input").val(newInterest)
				$("#interestsField").select();
			}


			// functions for interests field
			
			// add an interest with enter key press
			$("#interestsField-input").keyup(function(event){
				console.log("here", event.keyCode);
			    if(event.keyCode == 13){
			        addInterest();
			    }
			});

			// for the add interest plus button
			function addInterest() {
				// get new interest
				var newInterest = String(document.getElementById('interestsField-input').value);
				// make sure an interest is entered
				if (newInterest) {
					// insert new row
					row = $("<tr></tr>"); 
	   				// add interest 
		   			col1 = $("<td style='width:65px'></td>");
		   			col2 = $("<td style='width:180px'>" + newInterest + "&nbsp;&nbsp;</td>");
		   			col3 = $("<td style='width:100px'><span class='glyphicon glyphicon-remove red' height='50' onClick='deleteInterest(this)''></span></td>");
		   			// prepend new interest to top of list
		   			row.append(col1,col2,col3).prependTo("#interestsTable");
		   			document.getElementById('interestsField-input').value = "";
				}
			}


			// for error messages
			function emptyField() {

			}


			// for the delete interest x button
			function deleteInterest(row) {
				var rowOfButton = row.parentNode.parentNode;
         		rowOfButton.parentNode.removeChild(rowOfButton);
			}


			// functions that navigate to other pages
			function startShopping() {
				// navigates to shopping page
			}

			function viewToyChest() {
				// navigates to list of toys
			}
			
		</script>

	</body>
</html>